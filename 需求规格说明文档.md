# 需求规格说明文档

## 文档修改历史

| 修改人员 | 日期      | 修改原因                             | 版本号 |
| :------: | --------- | ------------------------------------ | ------ |
|  冯波云  | 2020/4/18 | 添加了非功能性需求                   | v1.0   |
|  蒋祚竑  | 2020/4/19 | 添加了功能需求、引言                 | V2.0   |
|  陈峙宇  | 2020/4/20 | 添加了任务概述                       | V3.0   |
|  冯波云  | 2020/6/25 | 更新了功能需求3.2.3-3.2.5            | V3.1   |
|  陈峙宇  | 2020/6/26 | 更新了功能需求3.2.6-3.2.7            | V3.2   |
|  冯波云  | 2020/7/2  | 更新了功能需求3.2.8                  | v3.3   |
|  蒋祚竑  | 2020/7/3  | 更新了功能需求3.2.9-3.2.18和数据定义 | v.3.4  |

## 目录

[toc]

## 1. 引言

### 1.1 目的

本文档描述了酒店预订系统第二阶段的功能需求和非功能需求，开发小组的软件系统实现与验证工作都以此文档为依据。		

###  1.2 范围

酒店预订系统是为了解决传统线下酒店预订模式存在的诸多问题而开发的系统。对于客户，期望通过该系统可以获得更详细的信息以进行酒店选择，并且优化预订酒店的流程，减少时间和交流成本。对于酒店，期望通过该系统防范恶意预订、方便工作人员处理预订信息、制定优惠策略以吸引旅客。	

### 1.3 参考文献

1.《软件工程与计算(卷二)软件开发的技术基础》————主编：骆斌 编著：刘钦、丁二玉。

## 2 任务概述

### 2.1 项目前景

#### 2.1.1 背景与机遇

随着工作和生活节奏的加快，人们的差旅出行需求迅速提升。但是传统的线下预订模式有着诸多不便之处，信息的交流上存在着滞后性和局限性。在上述大背景下，线上预订系统能在预订前为客户提供更多的信息，减少比对成本并能更大可能地满足客户需求，同时减少酒店管理、宣发成本，并防范恶意预订，从而能以更大投入去提升酒店的综合素质。

#### 2.1.2 业务需求

I.  为客户提供详尽的酒店信息，提升酒店信息透明度，方便用户进行比对和选择

II. 优化预订酒店的流程，降低酒店方管理、宣发成本；防范恶意预订，帮助酒店方处理预订信息

### 2.2 项目功能

| 使用者       | 功能                 | 简述                                                         |
| ------------ | -------------------- | ------------------------------------------------------------ |
| 客户         | 浏览酒店信息         | 包括地理位置、价格、星级、客房详情等                         |
|              | 管理个人基本信息     | 包括姓名、联系方式、信用等<br />PS：信用只可查看不得更改     |
|              | 预订功能             | 包括订单的创建、撤销、查看与评价                             |
| 酒店工作人员 | 管理酒店基本信息     | 包括酒店名、酒店介绍、地理位置、所属商圈、星级等             |
|              | 库存管理             | 包括房型的添加与删除和修改                                   |
|              | 制定酒店促销策略     | 包括生日特惠、多间特惠、合作企业特惠、节日特惠等             |
| 管理员       | 酒店工作人员账户管理 | 包括新建酒店工作人员账户、查看酒店工作人员信息、更改酒店对应的工作人员账户 |
|              | 新建酒店             |                                                              |

### 2.3 用户特征

本系统的最终用户为需预订酒店的客户。其对酒店相关信息抱有极大的关注，且其通常不了解软件的相关结构及预订流程，需为其清晰地展现酒店关键信息，提供易用的用户界面并加以引导。

本系统的操作人员为酒店工作人员，其不具有软件体系相关知识，软件操作能力较弱，应提供清晰明确的操作流程，使其能在简单培训后掌握系统功能和使用方法。

本系统的管理人员为平台管理者，其能够采用统一建模语言基于Web技术完成系统费分析与设计。具有一相当的平台开发、框架使用能力，具有一定的软件工程知识。

### 2.4 假设和依赖

I.   网络畅通，不会发生故障 

II.  所有操作任务的完成时间不会超过 1 个小时，即使用暂停与中断不会超过 1 个小时 

III. 地址中的城市和商圈比较固定，事先被预置在系统数据中，且少量修改直 接在后台数据中进行，不需要系统提供维护功能



## 3 详细需求描述

### 3.1 对外接口需求

#### 3.1.1 用户界面 

略

#### 3.1.2 通信接口

  CI:客户端与服务器使用http请求的方式进行通信

### 3.2 功能需求

#### 3.2.1  撤销订单

##### 3.2.1.1 特征描述

​	客户在浏览自己未执行的正常订单时，选择撤销订单，系统更改订单状态，根据撤销时间确认是否扣除信用值，更新对应酒店房型库存。

​	优先级=高

##### 3.2.1.2 刺激/响应序列

​	刺激：客户在浏览未执行订单界面选择撤销订单

​	响应：系统显示撤销订单确认框

​	刺激：客户选择确认取消

​	响应：系统更改订单状态为已撤销，根据撤销时间确定是否扣除信用值，更新对应酒店房型库存

##### 3.2.1.3 相关功能需求

| **OrderService.getUserOrders**      | **获取指定用户的订单信息** |
| ----------------------------------- | -------------------------- |
| **OrderService.annulOrder**         | **撤销订单**               |
| **RoomService.updateRoomInfo**      | **更新客房房间数量**       |
| **OrderVO.setOrderState**           | **更改订单状态为已撤销**   |
| **AccountService.updateUserCredit** | **更新客户信用值**         |
| **AccountService.getUserInfo**      | **获得指定客户个人信息**   |

#### 3.2.2  指定酒店促销策略

##### 3.2.2.1  特征描述

​	酒店或网站工作人员订制不同类型优惠策略进行促销活动，优惠策略的类型有生日特惠、多间特惠、满减优惠、限时优惠。

​	优先级=高

##### 3.2.2.2  刺激/响应序列

​	刺激：酒店或网站工作人员选择开始制定优惠策略

​	响应：系统显示优惠策略定制界面

​	刺激：酒店或网站工作人员选择优惠策略类型，填写优惠券名称、简介、优惠金额、达标金额，如果优惠券类型为限时优惠则补充填写起止日期，若为多间特惠则补充填写优惠房间数量

​	响应：系统将新优惠策略加入优惠列表中

##### 3.2.2.3  相关功能需求

| CouponService.addHotelTargetMoneyCoupon | 添加满减优惠策略                           |
| --------------------------------------- | ------------------------------------------ |
| **CouponService.addTimeCoupon**         | **添加限时优惠策略**                       |
| **CouponService.addMultiRoomsCoupon**   | **添加多间优惠策略**                       |
| **Coupon.setCouponName**                | **设置优惠策略名称**                       |
| **Coupon.setDescription**               | **设置优惠策略简介**                       |
| **Coupon.setCouponType**                | **设置优惠策略类型**                       |
| **Coupon.setTargetMoney**               | **设置达标金额**                           |
| **Coupon.setHotelId**                   | **若为酒店优惠策略设置酒店ID，否则设为-1** |
| **Coupon.setDiscountMoney**             | **设置优惠金额**                           |
| **Coupon.setStatus**                    | **设置优惠策略状态**                       |
| **Coupon.setStartTime**                 | **设置优惠策略起始时间**                   |
| **Coupon.setEndTime**                   | **设置优惠策略失效时间**                   |
| **Coupon.setRoomsNum**                  | **设置多间特惠起始优惠房间数**             |

#### 3.2.3  撤销指定酒店促销策略

##### 3.2.3.1  特征描述

​	酒店或网站工作人员订可撤销指定酒店不同优惠策略。

​	优先级=高

##### 3.2.3.2  刺激/响应序列

​	刺激：酒店或网站工作人员选择开始撤销优惠策略

​	响应：系统显示是否确定撤销该优惠策略弹窗

​	刺激：酒店或网站工作人员点击确定或取消

​	响应：该条优惠策略被删除或取消操作

##### 3.2.3.3  相关功能需求

| CouponService.annulCoupon        | 撤销某优惠策略                               |
| -------------------------------- | -------------------------------------------- |
| **CouponMapper.annulCoupon**     | **将改优惠策略的status值置为-1(即不可用)**   |
| **CouponMapper.deleteCancelled** | **从数据库中删除status字段值为-1的优惠策略** |

#### 3.2.4  对用户显示所有可用优惠策略

##### 3.2.4.1  特征描述

​	用户预订酒店房间时可查看该订单所有可用优惠策略

​	优先级=高

##### 3.2.4.2  刺激/响应序列

​	刺激：用户开始预定酒店

​	响应：系统显示预定酒店界面

​	刺激：用户填写完相关信息

​	响应：系统显示所有可用优惠券

##### 3.2.4.3  相关功能需求

| CouponServiceImpl.getMatchOrderCoupon     | 获取该订单所有可用优惠策略             |
| ----------------------------------------- | -------------------------------------- |
| **CouponServiceImpl.getHotelAllCoupon**   | **获取该酒店所有可用优惠策略**         |
| **couponMapper.selectByHotelId**          | **从数据库获取指定酒店的所有优惠策略** |
| **Coupon.getCouponType**                  | **获取指定优惠策略的类型**             |
| **MultiRoomCouponStrategyImpl.isMatch**   | **判断该订单是否某多间优惠策略**       |
| **TargetMoneyCouponStrategyImpl.isMatch** | **判断该订单是否某满减优惠策略**       |
| **TimeCouponStrategyImpl.isMatch**        | **判断该订单是否某限时优惠策略**       |

#### 3.2.5  撤销指定酒店促销策略

##### 3.2.5.1  特征描述

​	酒店或网站工作人员订可查看根据优惠类型排序后的优惠策略列表

​	优先级=高

##### 3.2.5.2  刺激/响应序列

​	刺激：酒店或网站工作人员选择根据优惠类型排序

​	响应：系统显示排序后的优惠策略

##### 3.2.5.3  相关功能需求

| CouponService.getHotelOrderedCoupon | 返回排序后的指定酒店优惠策略           |
| ----------------------------------- | -------------------------------------- |
| **CouponMapper.selectByHotelId**    | **从数据库获取指定酒店的所有优惠策略** |
| **Coupon.getCouponType**            | **获取指定优惠策略的类型**             |

#### 3.2.6查看客房详情

##### 3.2.6.1特征描述

​	客户在预订酒店之前，可以选择查看客房信息来获取客房详细信息。

​	优先级=低

##### 3.2.6.2刺激/响应序列

​	刺激：客户进入某一酒店界面

​	响应：系统显示可预订房型列表

​	刺激：客户选择某一房型查看详情

​	响应：系统显示客房面积、楼层、床型、可否加床、设施等信息

##### 3.2.6.3相关功能需求

| RoomService.retrieveHotelRoomInfo | 获取指定酒店所有客房信息 |
| --------------------------------- | ------------------------ |
|                                   |                          |

#### 3.2.7 修改客房信息

##### 3.2.7.1特征描述

​	在实际房型信息发生改变时，酒店工作人员可以修改已有的房型信息

​	优先级=中

##### 3.2.7.2刺激/响应序列

​	刺激：管理员进入管理酒店界面

​	响应：系统显示酒店列表

​	刺激：管理员选择某一酒店查看房型

​	响应：系统显示该酒店房型列表

​	刺激：管理员选择某一房型进行修改

​	响应：系统显示信息填写页面

​	刺激：管理员输入房型信息并确认

​	响应：系统提示成功

##### 3.2.7.3相关功能需求

| RoomService.retrieveHotelRoomInfo | 获取指定酒店所有客房信息 |
| --------------------------------- | ------------------------ |
| **RoomService.renewRoomInfo**     | **更新指定房型信息**     |

#### 3.2.8 查看指定酒店历史订单

##### 3.2.8.1特征描述

​	用户在酒店详情页面可查看自己以往在该酒店的订单

​	优先级=中

##### 3.2.8.2刺激/响应序列

​	刺激：用户进入酒店详情界面

​	响应：系统显示房间列表和以往订单按钮

​	刺激：用户点击以往订单按钮

​	响应：系统显示该用户在该酒店的历史订单

##### 3.2.8.3相关功能需求

| OrderService.getUserThisHotelOrders | 获取指定用户在指定酒店的所有订单信息 |
| ----------------------------------- | ------------------------------------ |
|                                     |                                      |

#### 3.2.9 预订酒店

##### 3.2.9.1 特征描述

​	用户选择酒店及房型预订，填写订单信息，系统记录订单信息、更新房间库存。

##### 3.2.9.2 刺激/响应序列

刺激：用户填写预订人姓名、手机号、入住退房日期、预订房间数、预计入住人数、有无儿童

响应：系统显示可用优惠券

刺激：用户选择使用的优惠券

响应：系统显示订单金额

刺激：用户确认预订

响应：系统记录订单信息、更新房间库存，显示预订成功，关闭预订页面

##### 3.2.9.3  相关功能需求

| HotelService.getRoomCurNum      | 获取指定房间当前数量 |
| ------------------------------- | -------------------- |
| **AccountService.getUserInfo**  | **获取指定用户信息** |
| **HotelService.updateRoomInfo** | **更新指定房间数量** |

#### 3.2.10 管理个人信息

##### 3.2.10.1 特征描述

​	用户进入个人信息界面，可以查看用户名、邮箱、手机号、信用值，用户可以选择修改用户名和手机号和修改密码。

优先级=中

##### 3.2.10.2 刺激/响应序列

刺激： 用户选择修改个人信息

响应： 系统将用户名和手机号置为可修改状态

刺激： 用户选择修改密码

响应： 系统显示旧密码和新密码的输入框

刺激： 用户选择保存修改

响应： 系统保存修改后的用户信息

#### 3.2.11 浏览个人订单

##### 3.2.11.1 特征描述

​	用户进入个人信息页面可以选择查看个人历史订单，可以查看订单号、酒店名、订单状态、价格、预订房型，可以根据订单状态筛选订单，可以选择评价已执行的订单、撤销订单和查看订单详情

优先级=低

##### 3.2.11.2 刺激/响应序列

刺激： 用户根据订单状态筛选显示的订单

响应： 系统以列表显示对应状态的订单

刺激： 用户选择查看订单详情

响应： 系统显示指定订单的入住退房日期、总金额、酒店名、预订房型、预订人姓名、联系方式、入住人数、有无儿童

刺激： 用户选择撤销已预订订单

响应： 系统显示确认撤销订单提示

刺激： 用户确认撤销订单

响应： 系统更改订单状态为已撤销，根据撤销时间决定是否扣除用户信用值，恢复房间库存

刺激： 用户选择评价已执行订单

响应： 系统显示撰写评价界面

刺激： 用户评分和填写评语后选择提交评价

响应： 系统记录评价，更新酒店评分，修改订单状态为已评价

##### 3.2.11.3 相关功能需求

| OrderService.getUserOrders    | 系统获取指定用户订单 |
| ----------------------------- | -------------------- |
| **OrderService.annulOrder**   | **系统撤销订单**     |
| **CommentService.addComment** | **系统添加评论**     |

#### 3.2.12  评价酒店

##### 3.2.12.1 特征描述

​	客户的订单状态由酒店管理人员设为已执行后，客户可以撰写评价，评价包括酒店评分和评语，提交评价后系统将会计算酒店的新评分并更新。

##### 3.2.12.2 刺激/响应序列

刺激：客户选择评价已执行的订单

响应：系统显示评价界面

刺激：客户选择提交评价

响应：系统更新酒店评分

##### 3.2.12.3 相关功能需求

| OrderService.executeOrder        | 系统将订单状态设为已执行   |
| -------------------------------- | -------------------------- |
| **CommentService.addComment**    | **系统为指定酒店添加评论** |
| **HotelService.updateHotelRate** | **系统更新指定酒店评分**   |

#### 3.2.13  管理酒店基本信息

##### 3.2.13.1 特征描述

​	酒店管理人员进入酒店管理界面，系统显示该酒店管理人员账户管理的所有酒店，酒店管理人员可以查看酒店名、酒店地址、酒店星级、酒店商圈、酒店简介、酒店联系方式、酒店评分，可以修改包括酒店名、酒店地址、酒店商圈、酒店简介、酒店星级、酒店联系方式在内的酒店基本信息。

##### 3.2.13.2 刺激/响应序列

刺激：酒店管理人员选择修改酒店基本信息

响应：系统显示酒店基本信息修改界面

刺激：酒店管理人员选择保存修改

响应：系统更新酒店基本信息

##### 3.2.13.3 相关功能需求

| HotelService.retrieveHotelsByManagerId | 系统获得指定酒店管理人员账户管理的所有酒店 |
| -------------------------------------- | ------------------------------------------ |
| **HotelService.updateHotelInfo**       | **系统更新酒店信息**                       |

#### 3.2.14 新建酒店

##### 3.2.14.1 特征描述

​	网站管理人员选择新建酒店，填写包括酒店名、酒店地址、酒店星级、酒店商圈、酒店简介、酒店联系方式在内的酒店基本信息后新建酒店，系统记录新酒店信息。

##### 3.2.14.2 刺激/响应序列

刺激：网站管理人员选择新建酒店

响应：系统显示酒店基本信息填写界面

刺激：网站管理人员将酒店基本信息填写完毕确认新建酒店

响应：系统记录新酒店信息

##### 3.2.14.3 相关功能需求

| HotelService.addHotel | 系统添加新酒店 |
| --------------------- | -------------- |
|                       |                |

#### 3.2.15 设置酒店管理人员账户

##### 3.2.15.1 特征描述：

​	网站管理人员可以查看指定酒店管理人员账户信息，若酒店暂无管理人员，可以通过输入酒店管理人员账户id设置酒店管理人员账户。若已有酒店管理人员，可以通过输入酒店管理人员账户id更改酒店管理人员账户。

##### 3.2.15.2 刺激/响应序列：

​	刺激：网站管理人员选择查看指定酒店管理人员账户信息

​	响应：系统显示指定酒店的酒店管理人员账户信息

​	刺激：网站管理人员选择修改指定酒店的管理人员账户

​	响应：系统将酒店管理人员账户id设为可修改状态

​	刺激：网站管理人员输入新酒店管理人员账户id并提交

​	响应：系统更新酒店的酒店管理人员账户

##### 3.2.15.3 相关功能需求：

| AccountService.getUserInfo       | 获取指定用户的用户信息 |
| -------------------------------- | ---------------------- |
| **HotelService.updateHotelInfo** | **更新指定酒店信息**   |

#### 3.2.16 添加酒店管理人员账户

##### 3.2.16.1 特征描述：

​	网站管理人员可以手动注册新酒店管理员账号

##### 3.2.16.2 刺激/响应序列：

​	刺激：网站管理人员选择添加酒店管理人员

​	响应：系统显示新建酒店管理人员界面

​	刺激：网站管理人员输入新酒店管理人员邮箱密码并提交

​	响应：系统添加新酒店管理人员账号

##### 3.2.16.3 相关功能需求：

| AdminService.addManager | 系统添加酒店管理人员账户 |
| ----------------------- | ------------------------ |
|                         |                          |

#### 3.2.17 搜索酒店

##### 3.2.17.1 特征描述：

​	用户可以通过搜索酒店名、添加筛选条件获取酒店列表，并对获得的酒店进行排序

##### 3.2.17.2 刺激/响应序列：

​	刺激：用户在搜索栏输入关键字搜索酒店

​	响应：系统显示酒店名含有关键字的酒店

​	刺激：用户添加评分、星级、商圈、是否曾预订中的一个或几个筛选条件

​	响应：系统显示筛选后的酒店

​	刺激：用户选择对酒店通过星级或评分进行排序

​	响应：系统显示排序后的酒店

##### 3.2.17.3 相关功能需求：

| HotelService.retrieveHotels | 获取所有酒店 |
| --------------------------- | ------------ |
|                             |              |

#### 3.2.18 浏览酒店详细信息

##### 3.2.18.1 特征描述

​	用户可以浏览酒店详细信息，包括酒店名、酒店地址、酒店评分、酒店星级、酒店简介、酒店联系方式、酒店房间、酒店评价、用户以往订单。

##### 3.2.18.2 刺激/响应序列

​	刺激：用户选择查看酒店详情

​	响应：系统显示酒店详情

​	刺激：用户选择查看房间信息

​	响应：系统显示酒店房间列表

​	刺激：用户选择查看酒店评价

​	响应：系统显示酒店评价列表

​	刺激：用户选择查看以往订单

​	响应：系统显示以往在酒店预订的历史订单列表

##### 3.2.18.3 相关功能需求

| HotelService.retrieveHotelDetails       | 获得酒店详细信息                     |
| --------------------------------------- | ------------------------------------ |
| **OrderService.getUserThisHotelOrders** | **获得用户在指定酒店的所有订单信息** |



### 3.3 非功能需求

#### 3.3.1  安全性

> **Safety1: 系统应该只允许经过验证和授权的用户访问。**
>
> **Safety2: 系统应该按照用户身份验证用户的访问权限：**
>
> >**其他身份的用户没有访问权限（如未注册身份的客户和未经授权的酒店工作人员及酒店管理员）。**
> 
> **Safety3: 系统中有一个默认的管理员账户，只允许该账户实施系统的用户管理与增删酒店。**
>
> **Safety4: 酒店管理人员和普通用户只能查看和维护自己的信息。**
>
> **Safety5: 酒店管理人员只能处理其所管理的酒店的工作。**
>
> **Safety6: 网站管理人员不能修改用户的信用值。**

#### 3.3.2  可维护性

>**Modifiability1: 在系统的数据格式发生变化时，系统要能够在3人1天内完成。**
>
>**Modifiability2: 如果系统需要增加新的特价和赠送类型（如特殊节日，会员福利等），要能够在0.25个人月内完成。**
>
>**Modifiability3: 如果酒店促销策略变更，要能够在0.25个人月内完成。**

#### 3.3.3  易用性

>**Usability1: 客户初次使用时，能在十分钟内完成从注册到预订的操作。**

#### **3.3.4  可靠性**

```
Reliability6:在客户端与服务器通信时，如果网络故障，系统不能出现故障。
```



#### 3.3.5  业务规则

> **BR1: 适用（房间号，参照日期）的房间优惠策略。**
>
> **((优惠房间号=房间号) 并且 ((开始日期早于等于参照日期) 并且 (结束日期晚于参照日期))**
>
> **BR2: 适用（合作企业客户）的房间优惠策略。**
>
> **(合作企业客户)**
>
> **BR3: 适用（一次性预定房间间数）的房间优惠策略。**
>
> **(3<=间数)**
>
> **……**

#### 3.3.6  约束

> IC1: 该项目为软件工程课程大作业，人力资源限定为4人，必须在学期结束前完成并于指定时间段前完成各阶段任务。项目不具有盈利能力且开发者为学生，故开发成本需控制在较低水平
>
> IC2:项目前端运用web技术，使用javascript语言编写，采用vue框架;项目后端使用java语言编写，采用spring框架，使用mysql数据库管理系统
>
> IC3:

### 3.4  数据需求

#### 3.4.1  数据定义

![数据库ER图](https://software-181870027.oss-cn-hangzhou.aliyuncs.com/%E9%85%92%E5%BA%97%E7%AE%A1%E7%90%86/ER%E5%9B%BE.png)

#### 3.4.2  默认数据

> **默认数据用于以下两种情况：**
>
> - **系统中新增加数据时。**
> - **编辑数据时不小心将相关内容清空时。**
>
> **Default1: 房间的数量默认为0。**
>
> **Default2: 房间费用或价格的数据默认为0。**
>
> **Default3: 客户信用分数据默认为0。**
>
> **Default4: 用户的默认身份为客户。**
>
> **Default5: 时间默认为当天。**
>
> **Default6: 客户可用优惠策略默认为空。**

#### 3.4.3  数据格式要求



> **Format1: 房间费用和价格的格式是必须大于0的整数，单位为元。**
>
> **Format2: 日期的格式必须是yyyy-mm-dd。**
>
> **Format3: 房间数量的格式必须是正整数。**

### 3.5  其他

> **1.系统投入使用时，要初始化用户、酒店信息等重要数据。**
>
> **2.系统投入使用前，需要对管理员，酒店工作人员进行为期两天的集中培训。**
